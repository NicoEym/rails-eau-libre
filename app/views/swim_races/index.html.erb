<br>
<br>
<br>
<div class="container">
  <div class="row">
    <div class="col-xs-12 col-md-4 offset-md-4">
      <%= simple_form_for :search, url: swim_races_path, method: "GET", input_html: { class: "form-inline search-form" } do |f| %>
       <%= f.input :city_name, input_html: {value: "", id: "swim_race_city_name", class: "border-blue"}, placeholder: "Chercher une ville", label: false %>
       <%= button_tag type: 'submit', class: "btn btn-search-form inline-absolute" do %>
          <i class="fas fa-search"></i>
        <% end %>
      <% end %>
    </div>
  </div>
  <br>
  <br>
  <% if @city_name.nil? %>
      <h2 class="text-center">Rechercher une course:</h2>
    <% else %>
      <h4 class="text-center">RÃ©sultats autour de <%= @city_name %></h4>
  <% end %>
    <div class="row">
      <div class="col-xs-12 col-md-6">
        <div class="race-container">
            <div class="row scroll-overflow">
              <% @swim_races.each do |swim_race| %>
                <div class="col-xs-12 col-md-12">
                  <div class="card" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.2)), url(<%= cl_image_path swim_race.photo %>);">
                    <div class="card-date"><%= swim_race.dates %></div>
                    <div class="card-name">
                      <h2><%= swim_race.name %></h2>
                      <p><%= swim_race.city_name %></p>
                    </div>
                    <% events = swim_race.swim_events %>
                      <div class="card-events">
                        <ul class="list-inline">
                        <% events.each do |event| %>
                          <li class="list-inline-item"><%= event.distance %> km</li>
                        <% end %>
                        </ul>
                      </div>
                    <%= link_to("", swim_race_path(swim_race.id), class:"card-link")  %>
                  </div>
                </div>
              <% end %>
            </div>
          </div>
        </div>
      <div class="col-xs-12 col-md-6">
        <div class="map-container">
          <div
            id="map"
            data-markers="<%= @markers.to_json %>"
            data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
          </div>
        </div>
      </div>
    </div>
</div>

